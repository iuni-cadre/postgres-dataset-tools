Below are the instructions from James McCombs that he sent me on 2022.03.07


Vijay,

To get to the Ohio VPC bastion:

ssh -X -i /path/to/cadre-vpc-bastian-ohio.pem ec2-user@18.222.78.250

Use ./ssh_to_metadb to get to the metadatabase.

Once on the metadatabase, give the following psql command.

psql --dbname cadre_meta --username cadre

I will give you the password.  If you ever forget the password, it is in the file
/home/ubuntu/lib/cadre_config.properties on the machine 10.0.1.234.  This machine is accessible using the ssh script ssh_to_janus_server_uspto_2021 on the bastion.

The schema is at:

https://github.com/iuni-cadre/cadre-metadatabase

The only script file we have for extracting metrics from the metadb is at:

https://github.com/iuni-cadre/logging-reporting/blob/master/metadb_reporting/generate_reports.bash

----------------------------------------------------------
2022.03.08

It appears that James McCombs was unaware of the "query" field in the "user_job" table! Apparently, it does not show up in the
sql on <https://github.com/iuni-cadre/cadre-metadatabase/blob/master/cadre-metadatabase.sql>! He asked me if I could dump the
database schema quite similar to the one listed in the above link. I don't think this is possible directly. However, you can
recreate a simpler sql by doing a pg_dump and then modifying the generated sql manually. The primary difference between the
sql listed on GH and the one generated by pg_dump is that the dumped sql add constraints, especially foreign key constraints,
using alter table statements and not inline definitions like the sql script file listed on GH. While I don't have any issue
with creating FK constraints using "ALTER TABLE" statements I can certainly understand that it can be difficult for people
unfamiliar with SQL/PostgreSQL. Anyhow, if you wish to dump the schema only then it might be worthwhile to set a few options
to pg_dump. Here's the command I would use to generate the initial sql file for modification:

  pg_dump --username=cadre --file=cadre-metadb-schema-dump-$(date +%Y%m%d).sql --schema-only --no-owner --no-privileges --no-acl --quote-all-identifiers cadre_meta

And here are the descriptions of some of the dump specific options:
  --no-owner                 : Do not output commands to set ownership of objects to match original database
  --schema-only (-s)         : Dump **only** the object definitions (schema), not data.
  --no-privileges / --no-acl : Prevent dumping of access privileges (grant/revoke commands)

